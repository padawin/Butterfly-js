var loader=(function(){var a={},b={};function c(){var f=[],g,e,d;if(arguments.length<2){throw"Arguments missing";}else{if(typeof(arguments[arguments.length-1])!=="function"){throw"The module must be a function. Got: "+arguments[arguments.length-1]+", "+typeof(arguments[arguments.length-1]);}}for(d=0;d<arguments.length;d++){if(d===0){e=arguments[d];if(e in a){throw"The module "+e+" already exists";}}else{if(d==arguments.length-1){g=arguments[d];}else{if(arguments[d] in a){f.push(a[arguments[d]]);}else{throw"Unknown module "+arguments[d]+" included by "+e;}}}}return[g,f,e];}b.executeModule=function(){var d=c.apply(this,arguments);d[0].apply({},d[1]);};b.addModule=function(){var d=c.apply(this,arguments);a[d[2]]=d[0].apply({},d[1]);};b.getModule=function(d){if(!(d in a)){throw"Unknown module "+d;}return a[d];};return b;})();if(typeof(exports)!="undefined"){exports.loader=loader;}if(typeof(require)!="undefined"){var loader=require("./loader.js").loader;}loader.addModule("bCore",function(){var h={},f="setAttribute",c="getAttribute",b="appendChild",a,g,d;d=function(i){return i!=null&&i!=undefined;};h.exists=d;if(typeof(document)!=="undefined"){g=function(i){if(typeof i=="string"&&i!=""){return document.getElementById(i);}else{if(i===""||!d(i)){return null;}else{return i;}}};h.$id=g;h.$sel=function(i){return document.querySelectorAll(i);};a=document.all?"className":"class";function e(i){return new RegExp("(?:\\s|^)"+i+"(?:\\s|$)");}h.hasClass=function(i,j){i=g(i);if(!d(i)||!i[c](a)){return false;}return i[c](a).match(e(j));};h.addClass=function(i,j){i=g(i);if(!h.hasClass(i,j)){var k=i[c](a)||"";i[f](a,k+" "+j);}};h.removeClass=function(i,j){i=g(i);if(d(i)&&h.hasClass(i,j)){var k=i[c](a).replace(e(j)," ").trim();i[f](a,k);}};h.replaceClass=function(k,j,l,i){k=g(k);if(d(k)){var m=k[c](a);if(h.hasClass(k,j)){m=m.replace(e(j)," "+l+" ");k[f](a,m);}else{if(i){h.addClass(k,l);}}}};h.setClass=function(i,j){i=g(i);d(i)&&i[f](a,j);};h.create=function(i,l,n){var m,j;if(i=="text"){m=document.createTextNode(l.value);}else{m=document.createElement(i);for(j in l){switch(j){default:m[f](j,l[j]);break;case"id":if(g(l[j])==null||g(l[j])==undefined){m[f]("id",l[j]);}break;case"style":case"cssText":m[f]("cssText",l[j]);m[f]("style",l[j]);break;case"class":case"className":h.setClass(m,l[j]);break;case"text":m[b](document.createTextNode(l[j]));break;}}}if(d(g(n))||n&&d(g(n.element))){if(!d(n.element)){g(n)[b](m);}else{if(d(g(n.before))){g(n.element).insertBefore(m,g(n.before));}else{if(d(g(n.after))&&d(g(n.after).nextSibling)){g(n.element).insertBefore(m,g(n.after).nextSibling);}else{g(n.element)[b](m);}}}}return m;};h.on=function(l,k,m,j,i){j=j||{};i=i||new Array();l=g(l);l[k+m]=function(n){var o=g("scope" in j?j.scope:window);if(!j.skipEvent){m.apply(o,i.concat([n]));}else{m.apply(o,i);}};if(l.attachEvent){l.attachEvent("on"+k,l[k+m]);}else{if(l.addEventListener){l.addEventListener(k,l[k+m],j.propagate==true);}}};h.off=function(l,k,m,j,i){j=j||{};i=i||new Array();l=g(l);if(l.detachEvent){l.detachEvent("on"+k,l[k+m]);}else{if(l.removeEventListener){l.removeEventListener(k,l[k+m],j.propagate==true);}}delete l[k+m];};h.appendChildren=function(l,j){var i;l=g(l);for(i=0;i<j.length;i++){l[b](j[i]);}};h.getStyle=function(i,j){i=g(i);if(!d(i)){return;}var k;if(i.currentStyle){j=j.replace(/\-(\w)/g,function(l,n){return n.toUpperCase();});k=i.currentStyle[j];}else{if(window.getComputedStyle){j=j.replace(/([A-Z])/g,function(l){return"-"+l.toLowerCase();});k=document.defaultView.getComputedStyle(i,null).getPropertyValue(j);}}return k;};h.getStyleValue=function(i,j){return parseFloat(h.getStyle(i,j));};}if(typeof(exports)!="undefined"){exports.B=h;}return h;});if(typeof(require)!="undefined"){var loader=require("./loader.js").loader;}loader.addModule("bAjax","bCore",function(c){var a={},b;b=function(n){var l=/<script[\stype="'x\/javascri]*>/gi,h=/<\/[\s]*script>/gi,g,e,d,i,m,k,j,f=[];while(n){g=n.search(l);e=n.match(l);m=(~g?g:n.length-1);if(!~g){k=n.length-1;j=0;}else{d=n.search(h);i=n.match(h);k=(~d?d:n.length-1);f.push(n.substring(m+e[0].length,k));j=i[0].length;}n=n.substring(k+j,n.length-1);}return f;};a.request=function(f,i,d,j,h,e){i=i||{};d=d||{};e=e||{};var g;if(window.XMLHttpRequest){g=new XMLHttpRequest();}else{if(window.ActiveXObject){g=new ActiveXObject("Microsoft.XMLHTTP");}}if(g){g.onreadystatechange=function(){if(g.readyState==4){i[g.status]&&(i[g.status])(g);}else{d[g.readyState]&&(d[g.readyState])(g);}};g.open(j=="POST"?j:"GET",f,c.exists(e.async)?e.async:true);if(j=="POST"){g.setRequestHeader("Content-type","application/x-www-form-urlencoded");g.setRequestHeader("Content-length",h.length);g.setRequestHeader("Connection","close");}g.send(j=="POST"?h:null);return g;}};a.update=function(g,f,h,k,j,e){var i="eval",d=function(n){c.$id(g).innerHTML=n.responseText;if(h){var m,l=getScripts(n.responseText);for(m in l){window[i](l[m]);}}};c.Ajax.request(f,{200:d},{},k,j,e);};if(typeof(exports)!="undefined"){exports.Ajax=a;}return a;});if(typeof(require)!="undefined"){var loader=require("./loader.js").loader;}loader.addModule("bTemplate","bAjax",function(d){var h={},f,a=/\[\[(.+?)]]/g,g={},e,b;f=function(j){var l=/^[a-zA-Z_$][0-9a-zA-Z_$]*(?:\.[a-zA-Z_$][0-9a-zA-Z_$]*)*$/g,k=/^each\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s+as\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s+on\s+([a-zA-Z_$\-0-9]+)$/,c=/^if\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s+then\s+([a-zA-Z_$\-0-9]+)$/,i;if((i=l.exec(j))!==null){return function(n){var m=n,o;if(i[0]!==j){throw"Invalid expression '"+j+"'";}i=i[0].split(".");while(i.length){if((o=i.shift())!=""){m=m[o];}}return m;};}else{if((i=k.exec(j))!==null){return function(o){var n=o[i[1]],q,m="",p;if(typeof(o[i[1]])!="object"){throw"Object or array expected, "+typeof(o[i[1]])+" got";}for(q in n){p={};p[i[2]]=n[q];m+=h.compile(i[3],p);}return m;};}else{if((i=c.exec(j))!==null){return function(o){var n="",m;if(o[i[1]]){m={};m[i[1]]=o[i[1]];n=h.compile(i[2],m);}return n;};}else{throw'Invalid template expression "'+j+'"';}}}};b=function(c,j,k){var i;d.request(g[c].url,{200:function(l){i=l.responseText;}},{},"GET",null,{async:false});g[c].html=i;};e=function(c,i){c=c.replace(a,function(){return f(arguments[1])(i);});return c;};h.init=function(c){g=c;};h.compile=function(i,j,k){var c;if(!(i in g)){throw'Invalid template "'+i+'"';}else{if("url" in g[i]&&!("html" in g[i])){b(i,j);}}if("html" in g[i]){c=e(g[i].html,j);}else{throw"A template needs at least an url or a html body";}if(k){k(c);}else{return c;}};if(typeof(exports)!="undefined"){exports.template=h;}return h;});if(typeof(require)!="undefined"){var loader=require("./loader.js").loader;}loader.addModule("bEvents",function(){var b={},a;a={on:function(d,c,e){if(!(d in b)){b[d]=[];}b[d].push([c,e]);},off:function(){var d=null,c=null,g=null,f=0;if(arguments.length==0){b={};return;}d=arguments[0];if(!(d in b)){return;}if(arguments.length==1){b[d]=[];return;}else{if(arguments.length==2){c=arguments[1];}else{if(arguments.length==3){c=arguments[1];g=arguments[2];}}}while(f<b[d].length){if(c==b[d][f][0]&&(!g||g&&g==b[d][f][1])){b[d].splice(f,1);}else{f++;}}},fire:function(d,c){if(d in b){for(var f=0;f<b[d].length;f++){b[d][f][1].apply(b[d][f][0],c);}}}};if(typeof(exports)!="undefined"){exports.Events=a;}return a;});