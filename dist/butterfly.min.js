var loader=(function(){var a={},b={};function c(){var f=[],g,e,d;if(arguments.length<2){throw"Arguments missing";}else{if(typeof(arguments[arguments.length-1])!=="function"){throw"The module must be a function. Got: "+arguments[arguments.length-1]+", "+typeof(arguments[arguments.length-1]);}}for(d=0;d<arguments.length;d++){if(d===0){e=arguments[d];if(e in a){throw"The module "+e+" already exists";}}else{if(d==arguments.length-1){g=arguments[d];}else{if(arguments[d] in a){f.push(a[arguments[d]]);}else{throw"Unknown module "+arguments[d]+" included by "+e;}}}}return[g,f,e];}b.executeModule=function(){var d=c.apply(this,arguments);d[0].apply({},d[1]);};b.addModule=function(){var d=c.apply(this,arguments);a[d[2]]=d[0].apply({},d[1]);};b.getModule=function(d){if(!(d in a)){throw"Unknown module "+d;}return a[d];};return b;})();if(typeof(exports)!="undefined"){exports.loader=loader;}if(typeof(require)!="undefined"&&typeof(loader)==="undefined"){var loader=require(__dirname+"/loader.js").loader;}loader.addModule("B",function(){var h={},f="setAttribute",c="getAttribute",b="appendChild",a,g,d;d=function(i){return i!=null&&i!=undefined;};h.exists=d;if(typeof(document)!=="undefined"){g=function(i){if(typeof i=="string"&&i!=""){return document.getElementById(i);}else{if(i===""||!d(i)){return null;}else{return i;}}};h.$id=g;h.$sel=function(i){return document.querySelectorAll(i);};a=document.all?"className":"class";function e(i){return new RegExp("(?:\\s|^)"+i+"(?:\\s|$)");}h.hasClass=function(i,j){i=g(i);if(!d(i)||!i[c](a)){return false;}return i[c](a).match(e(j));};h.addClass=function(i,j){i=g(i);if(!h.hasClass(i,j)){var k=i[c](a)||"";i[f](a,k+" "+j);}};h.removeClass=function(i,j){i=g(i);if(d(i)&&h.hasClass(i,j)){var k=i[c](a).replace(e(j)," ").trim();i[f](a,k);}};h.replaceClass=function(k,j,l,i){k=g(k);if(d(k)){var m=k[c](a);if(h.hasClass(k,j)){m=m.replace(e(j)," "+l+" ");k[f](a,m);}else{if(i){h.addClass(k,l);}}}};h.setClass=function(i,j){i=g(i);d(i)&&i[f](a,j);};h.create=function(i,l,n){var m,j;if(i=="text"){m=document.createTextNode(l.value);}else{m=document.createElement(i);for(j in l){switch(j){default:m[f](j,l[j]);break;case"id":if(g(l[j])==null||g(l[j])==undefined){m[f]("id",l[j]);}break;case"style":case"cssText":m[f]("cssText",l[j]);m[f]("style",l[j]);break;case"class":case"className":h.setClass(m,l[j]);break;case"text":m[b](document.createTextNode(l[j]));break;}}}if(d(g(n))||n&&d(g(n.element))){if(!d(n.element)){g(n)[b](m);}else{if(d(g(n.before))){g(n.element).insertBefore(m,g(n.before));}else{if(d(g(n.after))&&d(g(n.after).nextSibling)){g(n.element).insertBefore(m,g(n.after).nextSibling);}else{g(n.element)[b](m);}}}}return m;};h.on=function(l,k,m,j,i){j=j||{};i=i||new Array();l=g(l);l[k+m]=function(n){var o=g("scope" in j?j.scope:window);if(!j.skipEvent){m.apply(o,i.concat([n]));}else{m.apply(o,i);}};if(l.attachEvent){l.attachEvent("on"+k,l[k+m]);}else{if(l.addEventListener){l.addEventListener(k,l[k+m],j.propagate==true);}}};h.off=function(l,k,m,j,i){j=j||{};i=i||new Array();l=g(l);if(l.detachEvent){l.detachEvent("on"+k,l[k+m]);}else{if(l.removeEventListener){l.removeEventListener(k,l[k+m],j.propagate==true);}}delete l[k+m];};h.appendChildren=function(l,j){var i;l=g(l);for(i=0;i<j.length;i++){l[b](j[i]);}};h.getStyle=function(i,j){i=g(i);if(!d(i)){return;}var k;if(i.currentStyle){j=j.replace(/\-(\w)/g,function(l,n){return n.toUpperCase();});k=i.currentStyle[j];}else{if(window.getComputedStyle){j=j.replace(/([A-Z])/g,function(l){return"-"+l.toLowerCase();});k=document.defaultView.getComputedStyle(i,null).getPropertyValue(j);}}return k;};h.getStyleValue=function(i,j){return parseFloat(h.getStyle(i,j));};}(function(){var i={};h.Events={on:function(k,j,l){if(!(k in i)){i[k]=[];}i[k].push([j,l]);},off:function(){var k=null,j=null,m=null,l=0;if(arguments.length==0){i={};return;}k=arguments[0];if(!(k in i)){return;}if(arguments.length==1){i[k]=[];return;}else{if(arguments.length==2){j=arguments[1];}else{if(arguments.length==3){j=arguments[1];m=arguments[2];}}}while(l<i[k].length){if(j==i[k][l][0]&&(!m||m&&m==i[k][l][1])){i[k].splice(l,1);}else{l++;}}},fire:function(k,j){if(k in i){for(var l=0;l<i[k].length;l++){i[k][l][1].apply(i[k][l][0],j);}}}};})();(function(){var i;i=function(u){var r=/<script[\stype="'x\/javascri]*>/gi,n=/<\/[\s]*script>/gi,m,k,j,o,t,q,p,l=[];while(u){m=u.search(r);k=u.match(r);t=(~m?m:u.length-1);if(!~m){q=u.length-1;p=0;}else{j=u.search(n);o=u.match(n);q=(~j?j:u.length-1);l.push(u.substring(t+k[0].length,q));p=o[0].length;}u=u.substring(q+p,u.length-1);}return l;};h.Ajax={};h.Ajax.request=function(l,o,j,p,n,k){o=o||{};j=j||{};k=k||{};var m;if(window.XMLHttpRequest){m=new XMLHttpRequest();}else{if(window.ActiveXObject){m=new ActiveXObject("Microsoft.XMLHTTP");}}if(m){m.onreadystatechange=function(){if(m.readyState==4){o[m.status]&&(o[m.status])(m);}else{j[m.readyState]&&(j[m.readyState])(m);}};m.open(p=="POST"?p:"GET",l,h.exists(k.async)?k.async:true);if(p=="POST"){m.setRequestHeader("Content-type","application/x-www-form-urlencoded");m.setRequestHeader("Content-length",n.length);m.setRequestHeader("Connection","close");}m.send(p=="POST"?n:null);return m;}};h.Ajax.update=function(m,l,n,q,p,k){var o="eval",j=function(t){h.$id(m).innerHTML=t.responseText;if(n){var s,r=getScripts(t.responseText);for(s in r){window[o](r[s]);}}};h.Ajax.request(l,{200:j},{},q,p,k);};})();(function(){var l,i=/\[\[(.+?)]]/g,m={},k,j;h.Template={};l=function(q){function p(w,u){var t=u,v;w=w.split(".");while(w.length){if((v=w.shift())!=""){t=t[v];}}return t;}var s=/^[a-zA-Z_$][0-9a-zA-Z_$]*(?:\.[a-zA-Z_$][0-9a-zA-Z_$]*)*$/g,r=/^each\s+([a-zA-Z_$][0-9a-zA-Z_$]*(?:\.[a-zA-Z_$][0-9a-zA-Z_$]*)*)\s+as\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s+on\s+([a-zA-Z_$\-0-9]+)$/,n=/^if\s+([[a-zA-Z_$][0-9a-zA-Z_$]*(?:\.[a-zA-Z_$][0-9a-zA-Z_$]*)*)\s+then\s+([a-zA-Z_$\-0-9]+)(?:\s+with\s+([a-zA-Z_$][0-9a-zA-Z_$]*(?:\.[a-zA-Z_$][0-9a-zA-Z_$]*)*))?$/,o;if((o=s.exec(q))!==null){return function(u){var t=u,v;return p(o[0],u);};}else{if((o=r.exec(q))!==null){return function(v){var u=p(o[1],v),x,t="",w;if(typeof(u)!="object"){throw"Object or array expected, "+typeof(u)+" got";}for(x in u){w={};w[o[2]]=u[x];t+=h.Template.compile(o[3],w);}return t;};}else{if((o=n.exec(q))!==null){return function(v){var u="",t;if(p(o[1],v)){t={};if(o[3]!==undefined){t[o[3]]=p(o[3],v);}u=h.Template.compile(o[2],t);}return u;};}else{throw'Invalid template expression "'+q+'"';}}}};j=function(n,p,q){var o;h.Ajax.request(m[n].url,{200:function(r){o=r.responseText;}},{},"GET",null,{async:false});m[n].html=o;};k=function(n,o){n=n.replace(i,function(){return l(arguments[1])(o);});return n;};h.Template.init=function(n){m=n;};h.Template.compile=function(o,p,q){var n;if(!(o in m)){throw'Invalid template "'+o+'"';}else{if("url" in m[o]&&!("html" in m[o])){j(o,p);}}if("html" in m[o]){n=k(m[o].html,p);}else{throw"A template needs at least an url or a html body";}if(q){q(n);}else{return n;}};})();if(typeof(exports)!="undefined"){exports.B=h;}return h;});