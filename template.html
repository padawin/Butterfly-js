<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on https://github.com/jonrohan -->
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen">
		<link rel="stylesheet" href="stylesheets/github-dark.css">
		<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/default.min.css">
		<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
		<script type="text/javascript" src="dist/butterfly.min.js"></script>
		<script type="text/javascript">
			hljs.initHighlightingOnLoad();
			var B = loader.getModule('B');
		</script>
		<title>Butterfly-js</title>
		<meta name="description" content="Mini javascript library, to provide a couple of shortcuts without acting like a swiss army knife...">
		<meta name="viewport" content="width=device-width,initial-scale=1">
	</head>

	<body>
		<div class="wrapper">
			<header>
				<h1 class="title">Butterfly-js</h1>
			</header>
			<div id="container">
				<p class="tagline">Mini javascript library, to provide a couple of shortcuts without acting like a swiss army knife...</p>
				<div id="main" role="main">
					<div class="download-bar">
					<div class="inner">
						<a href="https://github.com/padawin/Butterfly-js/tarball/master" class="download-button tar"><span>Download</span></a>
						<a href="https://github.com/padawin/Butterfly-js/zipball/master" class="download-button zip"><span>Download</span></a>
						<a href="https://github.com/padawin/Butterfly-js" class="code">View Butterfly-js on GitHub</a>
					</div>
					<span class="blc"></span><span class="trc"></span>
					</div>
					<article class="markdown-body">
						<h3>Butterfly JS Template module documentation</h3>
						<div id="summary">
							<a href="index.html"><span>Home</span></a>
							<ul>
								<li><a href="loader.html"><span>Loader</span></a>: A module loader to ease the creation of encapsulated code
								working separated in different files while not needing the global scope.</li>
								<li><a href="core.html"><span>Core</span></a></li>
								<li><a href="ajax.html"><span>Ajax</span></a></li>
								<li>
									<span>Template</span>
									<ul>
										<li><a href="template.html#init">init</a></li>
										<li><a href="template.html#compile">compile</a></li>
									</ul>
								</li>
							</ul>
						</div>
						<section id="main_content" class="inner">
							<section>
								<p>In all the following examples, the Template module is loaded in the variable B as follow:</p>
								<pre><code class="javascript">var B = loader.getModule('bCore');
B.Template = loader.getModule('bTemplate');</code></pre>
							</section>
							<h2>Templates syntax</h2>
							<section>
								<p>Some commands can be executed in the templates to create some dynamic content. However no logic can be executed.</p>
								<ul>
									<li>
										<b>Expression</b>: To display an expression, use: <pre><code class="html">[[expression]]</code></pre>
										An expression is a javascript variable, or an object's attribute:
										<pre><code class="html">[[userName]]
[[user.name]]</code></pre>
										This is not a valid expression and will throw an error: <pre><code class="html">[[1 + 3]]</code></pre>
									</li>
									<li>
										<b>Each loop</b>: The each command allow the user to loop on an array or an object and call a template
										on each element: <pre><code class="html">[[each LOOPABLE as ELEMENT on TEMPLATE]]</code></pre>
										Example:
										<pre><code class="html">[[each users as user on userTemplate]]</code></pre>
										In this example, users is an array, and userTemplate will be applied for each user. Once in
										userTemplate, the current user is accessible via "user" (The ELEMENT part of the each command)
										and will be usable as follow:
										<pre><code class="html">&lt;!-- This is in userTemplate --&gt;
&lt;p&gt;My name is [[user.name] and I am [[user.age]]&lt;/p&gt;</code></pre>
									</li>
									<li>
										<b>If command</b>: The if command allows the execution of a template, only if a condition is respected
										or if an expression exists. The command's format is as follow:
										<pre><code class="html">[[each ELEMENT then TEMPLATE with DATA]]
[[each ELEMENT then TEMPLATE]]</code></pre>
										If DATA is provided, it is then accessible in TEMPLATE as root element, otherwise, ELEMENT will be available as root element.
									</li>
								</ul>
							</section>
							<a name="id"></a><h2>init(templates)</h2>
							<section>
								<p>First the application's list of templates must be registered. This is done with the init method.</p>
								<p>A list of templates has the following form:</p>
								<pre><code class="javascript">{
	templateOne: {
		url: '/url/to/a/template.html'
	},
	otherTemplate: {
		html: '&lt;p&gt;The template can also be some HTML directly&lt;/p&gt;'
	}
}</code></pre>
								<ul>
									<li>A template is identified by its key in the object ("templateOne" or "otherTemplate").</li>
									<li>A template must have either a html content, or an URL. If it has an URL, the response of the
										URL will be stored in a new html key to not execute the same request a second time if the template is needed again.</li>
								</p>
								<div class="example">
									<pre><code class="javascript">B.Template.init({
	loginBox: {
		url: '/templates/login.html'
	},
	users: {
		html: '&lt;ul&gt;[[each users as user on user]]&lt;/ul&gt;'
	},
	user: {
		html: '&lt;li&gt;User name: [[user.name]]&lt;/li&gt;'
	}
});
									</code></pre>
								</div>
							</section>

							<a name="compile"></a><h2>compile(templateName, data)</h2>
							<section>
								<p>Once the templates are loaded, they can be used with the compile method. This method expects up to 2 arguments:</p>
								<ul>
									<li>templateName: The name of the template to execute.</li>
									<li>data: The data to compile the template with.</li>
								</ul>
								<p>The compile methods returns the compiled template as a HTML string.</p>
								<h3>Example</h3>
								<div class="example">
									<pre><code class="html">&lt;ul id="users-list"&gt;&lt;/ul&gt;
&lt;input type="text" id="username" /&gt;&lt;button id="add-user"&gt;Add user&lt;/button&gt;
&lt;script type="text/javascript"&gt;
	B.Template.init({
		users: {
			html: '[[each users as user on user]]'
		},
		user: {
			url: 'templates-demo/user.html'
		}
	});

	var users = [];
	B.on(B.$id('add-user'), 'click', function () {
		var value = B.$id('username').value;
		users.push({name: value});
		B.$id('users-list').innerHTML = B.Template.compile('users', {users: users});
		B.$id('username').value = "";
	});
&lt;/script&gt;</code></pre>
								</div>
								<h3>Demo:</h3>
								<div class="demo">
									<ul id="users-list"></ul>
									<input type="text" id="username" /><button id="add-user">Add user</button>
									<script type="text/javascript">
										B.Template.init({
											users: {
												html: '[[each users as user on user]]'
											},
											user: {
												url: 'templates-demo/user.html'
											}
										});

										var users = [];
										B.on(B.$id('add-user'), 'click', function () {
											var value = B.$id('username').value;
											users.push({name: value});
											B.$id('users-list').innerHTML = B.Template.compile('users', {users: users});
											B.$id('username').value = "";
										});
									</script>
								</div>
							</section>
						</section>
					</article>
				</div>
			</div>
			<footer>
				<div class="owner">
				<p><a href="https://github.com/padawin" class="avatar"><img src="https://avatars2.githubusercontent.com/u/211438?v=3&amp;s=60" width="48" height="48"></a> <a href="https://github.com/padawin">padawin</a> maintains <a href="https://github.com/padawin/Butterfly-js">Butterfly-js</a></p>


				</div>
				<div class="creds">
					<small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
				</div>
			</footer>
		</div>
		<div class="current-section">
			<a href="#top">Scroll to top</a>
			<a href="https://github.com/padawin/Butterfly-js/tarball/master" class="tar">tar</a><a href="https://github.com/padawin/Butterfly-js/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
			<p class="name"></p>
		</div>
	</body>
</html>
